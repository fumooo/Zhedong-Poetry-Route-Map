{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Register from \"./Register\";\nimport request from \"@/utils/request\";\nimport axios from 'axios';\nimport Cookie from \"js-cookie\";\nexport default {\n  components: {\n    Register\n  },\n  data: function () {\n    const validatePassword = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('密码不能为空'));\n      } else if (value.toString().length < 6) {\n        callback(new Error('密码至少六位'));\n      } else {\n        callback();\n      }\n    };\n    const validateNewPassword = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('密码不能为空'));\n      } else if (value === this.ruleForm.password) {\n        callback(new Error('新密码不能与原密码相同!'));\n      } else if (value.toString().length < 6) {\n        callback(new Error('密码至少六位'));\n      } else {\n        callback();\n      }\n    };\n    const validateNewPassword2 = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('密码不能为空'));\n      } else if (value !== this.ruleForm.newpassword) {\n        callback(new Error('与新密码不一致!'));\n      } else if (value.toString().length < 6) {\n        callback(new Error('密码至少六位'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      activeName: 'ChangePassword',\n      ruleForm: {\n        username: '宣萱',\n        password: '123456',\n        newpassword: '654321',\n        newpassword2: '654321'\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }],\n        password: [{\n          validator: validatePassword,\n          required: true,\n          trigger: 'blur'\n        }],\n        newpassword: [{\n          validator: validateNewPassword,\n          required: true,\n          trigger: 'blur'\n        }],\n        newpassword2: [{\n          validator: validateNewPassword2,\n          required: true,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    handleClick(tab, event) {\n      console.log(tab, event);\n    },\n    onSubmit(formName) {\n      const params = {\n        password: this.ruleForm.password,\n        newPassword: this.ruleForm.newPassword\n      };\n    },\n    change() {\n      this.$refs['ruleForm'].validate(valid => {\n        if (valid) {\n          let params = new URLSearchParams();\n          params.append(\"newPassword\", this.ruleForm.newPassword);\n          params.append(\"password\", this.ruleForm.password);\n          params.append(\"username\", this.ruleForm.username);\n          request.post(\"http://10.203.71.146:8081/user/updatePassword\", params).then(res => {\n            if (res.code == '200') {\n              this.$router.push('/login'); //登录成功之后进行页面的跳转，跳转到主页\n              this.$message.success('修改成功！');\n            } else {\n              this.$message.error('修改失败！');\n            }\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";AAqEA;AACA;AACA;AACA;AAEA;EACAA;IACAC;EACA;EACAC;IAEA;MACA;QACA;MACA;QACAC;MACA;QACAA;MACA;IACA;IAEA;MACA;QACA;MACA;QACAA;MACA;QACAA;MACA;QACAA;MACA;IACA;IAEA;MACA;QACA;MACA;QACAA;MACA;QACAA;MACA;QACAA;MACA;IACA;IAEA;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAEAC;QAEAJ,WACA;UAAAK;UAAAC;UAAAC;QAAA,EACA;QAEAN,WACA;UAAAO;UAAAH;UAAAE;QAAA,EACA;QACAL,cACA;UAAAM;UAAAH;UAAAE;QAAA,EACA;QACAJ,eACA;UAAAK;UAAAH;UAAAE;QAAA;MAEA;IACA;EACA;EACAE;IACAC;MACAC;IACA;IAEAC;MACA;QACAX;QACAY;MAEA;IACA;IAGAC;MACA;QACA;UACA;UACAC;UACAA;UACAA;UACAC;YACA;cACA;cACA;YAEA;cACA;YACA;UACA;QACA;MACA;IACA;EAEA;AAGA","names":["components","Register","data","callback","activeName","ruleForm","username","password","newpassword","newpassword2","rules","required","message","trigger","validator","methods","handleClick","console","onSubmit","newPassword","change","params","request"],"sourceRoot":"src/view/back/Login","sources":["Password.vue"],"sourcesContent":["<template>\n\n    <div class=\"ChangePassword-wrap\">\n        <div class=\"ms-title\"></div>\n        <div class=\"ms-ChangePassword\">\n\n            <el-tabs v-model=\"activeName\" stretch type=\"card\" >\n                <el-tab-pane label=\"修改密码\"  name=\"ChangePassword\">\n                    <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"0px\"  class=\"demo-ruleForm\">\n\n                            <el-form-item prop=\"username\">\n                                <el-input v-model=\"ruleForm.username\" placeholder=\"username\">\n                                    <template slot=\"prepend\">\n                                        <li class=\"el-icon-user-solid\"></li>\n                                    </template>\n                                </el-input>\n                            </el-form-item>\n\n\n\n                        <el-form-item prop=\"password\">\n                            <el-input show-password\n                                      auto-complete=\"new-password\"  v-model=\"ruleForm.password\" placeholder=\"password\">\n                                <template slot=\"prepend\">\n                                    <li class=\"el-icon-lock\"></li>\n                                </template>\n                            </el-input>\n                        </el-form-item>\n\n                        <el-form-item prop=\"newpassword\">\n                            <el-input show-password\n                                      auto-complete=\"new-newpassword\" placeholder=\"newpassword\" v-model=\"ruleForm.newpassword\" >\n\n                                <template slot=\"prepend\">\n                                    <li class=\"el-icon-lock\"></li>\n                                </template>\n\n                            </el-input>\n                        </el-form-item>\n                        <el-form-item prop=\"newpassword2\">\n                            <el-input show-password\n                                      auto-complete=\"new-newpassword2\" placeholder=\"newpassword2\" v-model=\"ruleForm.newpassword2\" >\n\n                                <template slot=\"prepend\">\n                                    <li class=\"el-icon-lock\"></li>\n                                </template>\n\n                            </el-input>\n                        </el-form-item>\n                        <div class=\"ChangePassword-btn\">\n                        <el-button type=\"primary\" @click=\"onSubmit\">保存</el-button>\n                        </div>\n                        <br>\n\n                        <div class=\"ChangePassword-btn\">\n                            <el-button type=\"primary\" @click=\"change\">确定</el-button>\n                        </div>\n                    </el-form>\n                </el-tab-pane>\n\n\n            </el-tabs>\n\n\n        </div>\n    </div>\n</template>\n\n<script>\nimport Register from \"./Register\";\nimport request from \"@/utils/request\";\nimport axios from 'axios';\nimport Cookie from \"js-cookie\"\n\nexport default {\n    components:{\n        Register\n    },\n    data: function(){\n\n        const validatePassword = (rule, value, callback) => {\n            if (!value) {\n                return callback(new Error('密码不能为空'));\n            } else if(value.toString().length < 6){\n                callback(new Error('密码至少六位'));\n            } else {\n                        callback();\n                    }\n        };\n\n        const validateNewPassword = (rule, value, callback) => {\n            if (!value) {\n                return callback(new Error('密码不能为空'));\n            } else if (value === this.ruleForm.password) {\n                callback(new Error('新密码不能与原密码相同!'))\n            }else if(value.toString().length < 6){\n                callback(new Error('密码至少六位'));\n             } else {\n                callback();\n            }\n        };\n\n        const validateNewPassword2 = (rule, value, callback) => {\n            if (!value) {\n                return callback(new Error('密码不能为空'));\n            } else if (value !== this.ruleForm.newpassword) {\n                callback(new Error('与新密码不一致!'))\n            }else if(value.toString().length < 6){\n                callback(new Error('密码至少六位'));\n            } else {\n                callback();\n            }\n        };\n\n        return {\n            activeName:'ChangePassword',\n            ruleForm: {\n                username:'宣萱',\n                password: '123456',\n                newpassword:'654321',\n                newpassword2:'654321'\n            },\n\n            rules: {\n\n                username: [\n                    { required: true, message: '请输入用户名', trigger: 'blur' }\n                ],\n\n                password: [\n                    { validator:validatePassword, required: true,  trigger: 'blur' }\n                ],\n                newpassword: [\n                    { validator:validateNewPassword, required: true,  trigger: 'blur' }\n                ],\n                newpassword2: [\n                    { validator:validateNewPassword2, required: true,  trigger: 'blur' }\n                ],\n            }\n        }\n    },\n    methods: {\n        handleClick(tab, event) {\n            console.log(tab, event);\n        },\n\n        onSubmit(formName) {\n            const params = {\n                password: this.ruleForm.password,\n                newPassword: this.ruleForm.newPassword,\n\n            }\n        },\n\n\n        change(){\n            this.$refs['ruleForm'].validate((valid) => {\n                if (valid) {\n                    let params = new URLSearchParams();\n                    params.append(\"newPassword\",this.ruleForm.newPassword);\n                    params.append(\"password\",this.ruleForm.password);\n                    params.append(\"username\",this.ruleForm.username);\n                    request.post(\"http://10.203.71.146:8081/user/updatePassword\",params).then(res => {\n                        if (res.code == '200') {\n                            this.$router.push('/login');  //登录成功之后进行页面的跳转，跳转到主页\n                            this.$message.success('修改成功！')\n\n                        } else {\n                            this.$message.error('修改失败！')\n                        }\n                    })\n                }\n            })\n        },\n\n    },\n\n\n}\n</script>\n\n<style scoped>\n.ChangePassword-wrap{\n    position: relative;\n    width:100%;\n    height:100%;\n\n\n}\n.ms-title{\n    position: absolute;\n    top:50%;\n    width:100%;\n    margin-top: -230px;\n    text-align: center;\n    font-size:30px;\n    color: #dd6161;\n\n}\n.ms-ChangePassword{\n    position: absolute;\n    left:50%;\n    top:50%;\n    width:300px;\n    /*height:200px;*/\n    margin:-150px 0 0 -190px;\n    padding:40px;\n    border-radius: 5px;\n    background: #ecb259;\n\n}\n.ChangePassword-btn{\n    text-align: center;\n\n}\n.ChangePassword-btn button{\n    width:100%;\n    height:36px;\n\n}\n\n.el-tabs__header {\n    margin-left: auto;\n    margin-right: auto;\n    width: 50%;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}