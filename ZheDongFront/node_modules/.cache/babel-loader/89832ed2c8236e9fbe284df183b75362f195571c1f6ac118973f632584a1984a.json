{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { BmlCurveLine } from 'vue-baidu-map';\nimport { mapState } from 'vuex';\nexport default {\n  components: {\n    BmlCurveLine\n  },\n  name: \"baidu\",\n  mounted: function () {\n    // this.lineList = this.addlineList(this.positions)\n    // console.log(this.lineList)\n    // console.log(this.lineList[0][1].name)\n\n    this.path = require('../assets/point/marker.azure.png');\n  },\n  data() {\n    return {\n      style: {\n        border: '1px solid rgb(187, 187, 187)',\n        font: '12px arial'\n      },\n      center: {\n        lng: 0,\n        lat: 0\n      },\n      zoom: 8,\n      // 宁波、绍兴、台州、温州，金华、丽水、衢州 经纬度\n      positions: [\n        // {id:1, lng: 121.555, lat: 29.9, name:'宁波', showflag:true},\n        // {id:2, lng: 120.586, lat: 30.05, name:'绍兴', showflag:true},\n        // {id:3, lng: 121.43, lat: 28.68, name:'台州', showflag:true},\n        // {id:4, lng: 120.7, lat: 28.01, name:'温州', showflag:true},\n        // {id:5, lng: 119.649506, lat: 29.089524, name:'金华', showflag:true},\n        // {id:6, lng: 119.933, lat: 28.48, name:'丽水', showflag:true},\n        // {id:7, lng: 118.87263, lat: 28.99, name:'衢州', showflag:true},\n      ],\n      lineList: [],\n      path: [],\n      lineColor: ['pink', 'purple']\n    };\n  },\n  methods: {\n    handler({\n      BMap,\n      map\n    }) {\n      console.log(BMap, map);\n      // // 经度\n      // this.center.lng = 116.404\n      // // 维度\n      // this.center.lat = 39.915\n      this.center = \"台州\";\n      // 地图放大等级\n\n      // 个性化样式\n      map.setMapStyleV2({\n        styleId: \"2896c69336cf847cc5ab917cd1e19d44\"\n      });\n      map.enableScrollWheelZoom(true);\n      // map.setMapType(BMAP_HYBRID_MAP);\n    }\n  },\n\n  computed: {\n    poemList() {\n      return this.$store.state.poemList;\n    },\n    changeColor() {\n      //通过判断多选框选中数量的改变来给曲线赋值颜色\n      return this.lineList;\n    }\n  },\n  watch: {\n    poemList(newVal, oldVal) {\n      // console.log(typeof(newVal[0]))\n      // console.log(\"长度\"+newVal.length)\n      if (newVal.length == 0) {\n        this.positions = [];\n        this.lineList = [];\n      }\n      if (newVal.length > 0) {\n        this.positions = [];\n        this.lineList = [];\n        for (let i = 0; i < newVal.length; i++) {\n          //axios查询覆盖物点\n          this.$http.get(\"queryByPeopleId\", {\n            params: {\n              id: newVal[i]\n            }\n          }).then(response => {\n            this.positions.push(response.data); //通过键值对形式去存储数据\n            // console.log(this.positions)\n            // console.log(typeof(response.data))\n          }).catch(function (error) {\n            console.log(error);\n          });\n          //axios查询覆盖物曲线\n          this.$http.get(\"queryLineByPeopleId\", {\n            params: {\n              id: newVal[i]\n            }\n          }).then(response => {\n            this.lineList.push(response.data); //通过键值对形式去存储数据\n            // console.log(this.positions)\n            // console.log(typeof(response.data))\n          }).catch(function (error) {\n            console.log(error);\n          });\n          // console.log(this.lineList)\n        }\n      }\n    },\n\n    changeColor(newVal, oldVal) {\n      return \"pink\";\n    }\n  }\n};","map":{"version":3,"mappings":";AA0BA;AACA;AACA;EACAA;IAAAC;EAAA;EACAC;EACAC;IACA;IACA;IACA;;IAEA;EAEA;EACAC;IACA;MACAC;QAAAC;QAAAC;MAAA;MACAC;QAAAC;QAAAC;MAAA;MACAC;MACA;MACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MAAA,CACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MAAAC;MAAAC;IAAA;MACAC;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACAD;QACAE;MACA;MACAF;MACA;IACA;EAEA;;EACAG;IACAC;MACA;IACA;IACAC;MACA;MACA;IACA;EACA;EACAC;IACAF;MACA;MACA;MACA;QACA;QACA;MACA;MACA;QACA;QACA;QACA;UACA;UACA;YACAG;cACAC;YACA;UACA,GACAC;YACA;YACA;YACA;UACA,GACAC;YACAT;UACA;UACA;UACA;YACAM;cACAC;YACA;UACA,GACAC;YACA;YACA;YACA;UACA,GACAC;YACAT;UACA;UACA;QACA;MAEA;IACA;;IAEAI;MACA;IACA;EACA;AACA","names":["components","BmlCurveLine","name","mounted","data","style","border","font","center","lng","lat","zoom","positions","lineList","path","lineColor","methods","handler","BMap","map","console","styleId","computed","poemList","changeColor","watch","params","id","then","catch"],"sourceRoot":"src/components","sources":["BaiduMap.vue"],"sourcesContent":["<template>\n  <div>\n    <baidu-map :center=\"center\" :zoom=\"zoom\" @ready=\"handler\" class=\"baidu\" MapType=\"BMAP_HYBRID_MAP\">\n      <bm-navigation anchor=\"BMAP_ANCHOR_TOP_LEFT\"></bm-navigation>\n      <bm-overview-map anchor=\"BMAP_ANCHOR_BOTTOM_RIGHT\" :isOpen=\"false\"></bm-overview-map>\n      <bm-map-type :map-types=\"['BMAP_NORMAL_MAP', 'BMAP_HYBRID_MAP']\" anchor=\"BMAP_ANCHOR_TOP_RIGHT\"></bm-map-type>\n      \n      <div v-for='item in positions'>\n      <bm-marker v-for='position in item' :icon=\"{url: path, size: {width: 32, height: 32}}\" :key=\"position.id\" :position=\"{lng: position.lng, lat: position.lat}\">\n        <bm-label :content=\"position.cname\" \n        :labelStyle=\"style\" \n        :offset=\"{width: -8, height: 29}\"\n        />\n      </bm-marker>      \n      </div>\n      \n      <div v-for='item in lineList' >\n      <bml-curve-line :points=\"item\" :stroke-color=\"changeColor\" :stroke-opacity=\"1\" :stroke-weight=\"2\" ></bml-curve-line>\n      </div>\n      \n      <!-- <bm-polyline :path=\"lineList\" stroke-color=\"blue\" :stroke-opacity=\"1\" :stroke-weight=\"2\" :editing=\"true\" ></bm-polyline> -->\n    </baidu-map>\n  </div>\n</template>\n\n<script>\nimport {BmlCurveLine} from 'vue-baidu-map'\nimport {mapState} from 'vuex'\nexport default {\n  components:{BmlCurveLine},\n  name: \"baidu\",\n  mounted:function(){\n    // this.lineList = this.addlineList(this.positions)\n    // console.log(this.lineList)\n    // console.log(this.lineList[0][1].name)\n    \n    this.path = require('../assets/point/marker.azure.png')\n    \n  },\n  data() {\n    return {\n      style:{border:'1px solid rgb(187, 187, 187)', font:'12px arial'},\n      center: { lng: 0, lat: 0 },\n      zoom: 8,\n      // 宁波、绍兴、台州、温州，金华、丽水、衢州 经纬度\n      positions:[\n        // {id:1, lng: 121.555, lat: 29.9, name:'宁波', showflag:true},\n        // {id:2, lng: 120.586, lat: 30.05, name:'绍兴', showflag:true},\n        // {id:3, lng: 121.43, lat: 28.68, name:'台州', showflag:true},\n        // {id:4, lng: 120.7, lat: 28.01, name:'温州', showflag:true},\n        // {id:5, lng: 119.649506, lat: 29.089524, name:'金华', showflag:true},\n        // {id:6, lng: 119.933, lat: 28.48, name:'丽水', showflag:true},\n        // {id:7, lng: 118.87263, lat: 28.99, name:'衢州', showflag:true},\n      ],\n      lineList:[],\n      path:[],\n      lineColor:['pink','purple']\n    };\n  },\n  methods: {\n    handler({ BMap, map }) {\n      console.log(BMap, map);\n      // // 经度\n      // this.center.lng = 116.404\n      // // 维度\n      // this.center.lat = 39.915\n      this.center = \"台州\";\n      // 地图放大等级\n      \n      // 个性化样式\n      map.setMapStyleV2({\n        styleId: \"2896c69336cf847cc5ab917cd1e19d44\",\n      });\n      map.enableScrollWheelZoom(true);\n      // map.setMapType(BMAP_HYBRID_MAP);\n    },\n\n  },\n  computed:{\n    poemList(){\n\t\t\treturn this.$store.state.poemList\n\t\t},\n    changeColor(){\n      //通过判断多选框选中数量的改变来给曲线赋值颜色\n        return this.lineList\n    },\n  },\n  watch:{\n    poemList(newVal,oldVal){\n      // console.log(typeof(newVal[0]))\n      // console.log(\"长度\"+newVal.length)\n      if(newVal.length == 0){\n        this.positions = []\n        this.lineList = []\n      }\n      if(newVal.length > 0){\n        this.positions = []\n        this.lineList = []\n        for(let i = 0; i < newVal.length; i++){\n          //axios查询覆盖物点\n          this.$http.get(\"queryByPeopleId\",{\n              params: {\n              id: newVal[i]\n            }\n          })\n          .then((response)=>{ \n              this.positions.push(response.data)//通过键值对形式去存储数据\n              // console.log(this.positions)\n              // console.log(typeof(response.data))\n          }) \n          .catch(function (error) {\n            console.log(error);\n          }) \n          //axios查询覆盖物曲线\n          this.$http.get(\"queryLineByPeopleId\",{\n              params: {\n              id: newVal[i]\n            }\n          })\n          .then((response)=>{ \n              this.lineList.push(response.data)//通过键值对形式去存储数据\n              // console.log(this.positions)\n              // console.log(typeof(response.data))\n          }) \n          .catch(function (error) {\n            console.log(error);\n          }) \n          // console.log(this.lineList)\n        } \n        \n      }\n    },\n    \n    changeColor(newVal,oldVal){\n      return \"pink\"\n    }\n  }\n};\n</script>\n\n<style scoped>\n.baidu {\n  width: 100%;\n  height: 500px;\n  display: flex;\n}\n.baidu-map {\n  width: 100%;\n  height: 500px;\n  display: flex;\n}\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}