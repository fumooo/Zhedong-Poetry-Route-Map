{"ast":null,"code":"export default {\n  name: \"Password\",\n  data() {\n    return {\n      form: {},\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\n      rules: {\n        password: [{\n          required: true,\n          message: '请输入原密码',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          message: '长度不少于3位',\n          trigger: 'blur'\n        }],\n        newPassword: [{\n          required: true,\n          message: '请输入新密码',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          message: '长度不少于3位',\n          trigger: 'blur'\n        }],\n        confirmPassword: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          message: '长度不少于3位',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created() {\n    this.form.account = this.$store.state.account;\n  },\n  methods: {\n    save() {\n      this.$refs.pass.validate(valid => {\n        if (valid) {\n          if (this.form.newPassword !== this.form.confirmPassword) {\n            this.$message.error(\"2次输入的新密码不相同\");\n            return false;\n          }\n          this.$http.post(\"/login\", this.form).then(res => {\n            console.log(res.data);\n            if (res.data) {\n              this.$message.success(\"原密码正确\");\n              this.$http.post(\"/login\", this.form.newPassword).then(res => {});\n            } else {\n              this.$message.error(\"原密码错误\");\n            }\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AAqBA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC,WACA;UAAAC;UAAAC;UAAAC;QAAA,GACA;UAAAC;UAAAF;UAAAC;QAAA,EACA;QACAE,cACA;UAAAJ;UAAAC;UAAAC;QAAA,GACA;UAAAC;UAAAF;UAAAC;QAAA,EACA;QACAG,kBACA;UAAAL;UAAAC;UAAAC;QAAA,GACA;UAAAC;UAAAF;UAAAC;QAAA;MAEA;IACA;EACA;EACAI;IACA;EACA;EACAC;IACAC;MACA;QACA;UACA;YACA;YACA;UACA;UACA;YACAC;YACA;cACA;cACA,8DAEA;YACA,OACA;cACA;YACA;UACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","form","user","rules","password","required","message","trigger","min","newPassword","confirmPassword","created","methods","save","console"],"sourceRoot":"src/view/back/Login","sources":["Password.vue"],"sourcesContent":["<template>\n    \n      <el-form label-width=\"120px\" size=\"small\" :model=\"form\" :rules=\"rules\" ref=\"pass\">\n  \n        <el-form-item label=\"原密码\" prop=\"password\">\n          <el-input v-model=\"form.password\" autocomplete=\"off\" show-password></el-input>\n        </el-form-item>\n        <el-form-item label=\"新密码\" prop=\"newPassword\">\n          <el-input v-model=\"form.newPassword\" autocomplete=\"off\" show-password></el-input>\n        </el-form-item>\n        <el-form-item label=\"确认新密码\" prop=\"confirmPassword\">\n          <el-input v-model=\"form.confirmPassword\" autocomplete=\"off\" show-password></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n        </el-form-item>\n      </el-form>\n    \n  </template>\n  \n  <script>\n  export default {\n    name: \"Password\",\n    data() {\n      return {\n        form: {},\n        user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\n        rules: {\n          password: [\n            { required: true, message: '请输入原密码', trigger: 'blur' },\n            { min: 3, message: '长度不少于3位', trigger: 'blur' }\n          ],\n          newPassword: [\n            { required: true, message: '请输入新密码', trigger: 'blur' },\n            { min: 3, message: '长度不少于3位', trigger: 'blur' }\n          ],\n          confirmPassword: [\n            { required: true, message: '请输入密码', trigger: 'blur' },\n            { min: 3, message: '长度不少于3位', trigger: 'blur' }\n          ],\n        }\n      }\n    },\n    created() {\n      this.form.account = this.$store.state.account\n    },\n    methods: {\n      save() {\n        this.$refs.pass.validate((valid) => {\n          if (valid) {\n            if (this.form.newPassword !== this.form.confirmPassword) {\n              this.$message.error(\"2次输入的新密码不相同\")\n              return false\n            }\n            this.$http.post(\"/login\", this.form).then(res => {\n                console.log(res.data)\n                if (res.data) {\n                    this.$message.success(\"原密码正确\")\n                    this.$http.post(\"/login\",this.form.newPassword).then(res => {\n\n                    })\n                }\n                else {\n                    this.$message.error(\"原密码错误\")\n            }\n            })\n          }\n        })\n      },\n    }\n  }\n  </script>\n  \n  <style>\n  .avatar-uploader {\n    text-align: center;\n    padding-bottom: 10px;\n  }\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 138px;\n    height: 138px;\n    line-height: 138px;\n    text-align: center;\n  }\n  .avatar {\n    width: 138px;\n    height: 138px;\n    display: block;\n  }\n  </style>\n  "]},"metadata":{},"sourceType":"module","externalDependencies":[]}